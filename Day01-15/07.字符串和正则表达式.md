## 字符串和常用数据结构

#### python 字符编码

```python
#coding = utf-8
#coding:GBK
```



### 使用字符串

第二次世界大战促使了现代电子计算机的诞生，最初计算机被应用于导弹弹道的计算，而在计算机诞生后的很多年时间里，计算机处理的信息基本上都是数值型的信息。世界上的第一台电子计算机叫ENIAC（电子数值积分计算机），诞生于美国的宾夕法尼亚大学，每秒钟能够完成约5000次浮点运算。随着时间的推移，虽然数值运算仍然是计算机日常工作中最为重要的事情之一，但是今天的计算机处理得更多的数据可能都是以文本的方式存在的，如果我们希望通过Python程序操作本这些文本信息，就必须要先了解字符串类型以及与它相关的知识。

python支持序列的通用方法（包括比较、计算长度、元素访问、分片等操作）以外，字符串类型还支持一些特有的操作方法，例如，格式化操作、字符串查找、字符串替换等。但由于字符串属于不可变序列，不能对字符串对象进行元素增加、修改与删除等操作。字符串对象提供的replace（）和translate（）方法并不是对原字符串直接修改替换，而是返回一个修改替换后的结果字符串。

所谓**字符串**，就是由零个或多个字符组成的有限序列，一般记为![$${\displaystyle s=a_{1}a_{2}\dots a_{n}(0\leq n \leq \infty)}$$](./res/formula_5.png)。在Python程序中，如果我们把单个或多个字符用单引号或者双引号包围起来，就可以表示一个字符串。

```Python
s1 = 'hello, world!'
s2 = "hello, world!"
# 以三个双引号或单引号开头的字符串可以折行
s3 = """
hello, 
world!
"""
print(s1, s2, s3, end='')
```

###### python字符串驻留机制

对于短字符串，将其赋值给多个不同的对象时，内存中只有一个副本，多个对象共享该副本。长字符串则不同。

```python
a= '1234'
b= '1234'
print(id(a)==id(b))				#True

a='1234'*50
b='1234'*50
print(id(a)==id(b))				#True
```

##### 字符串格式化

```python
'% [-] [+] [0] [m] [,n] 格式字符' % x
1：x 带转换的表达式
2：% 格式运算符
3：指定类型，见表4-1
4：指定精度
5：指定最小宽度
6：指定空位填0
7：对正整数加正号
8：指定左对齐输出
9：格式标志，表示格式开始
```



| 格式字符 | 说明                         | 格式字符 | 说明                |
| -------- | ---------------------------- | -------- | ------------------- |
| %s       | 字符串（采用str（）的显示）  | %x       | 十六进制整数        |
| %r       | 字符串（采用repr（）的显示） | %e       | 指数（基底写为e）   |
| %c       | 单个字符                     | %f、%F   | 浮点数              |
| %d       | 二进制整数                   | %g       | 指数（e）或者浮点数 |
| %b       | 十进制整数                   | %G       | 指数（E）或者浮点数 |
| %o       | 八进制整数                   | %%       | 字符“%”             |

```python
x = 1235
so = "%o" %x
print(so)					#2323
sh = "%x" %x
print(sh)					#4d3
se = "%e" %x
print(se)					#1.235000e+03
print(chr(ord("3")+1))		#4
print('%d,%c'%(65,65))		#65,A
print(int('555'))			#555
print('%s'%[1,2,3])			#[1,2,3]
```

   	 使用format（）方法进行格式化，不仅可以使用位置进行格式化，还支持使用与位置无关的参数名字来进行格式化，并且支持序列解包格式化。

```python
print("The number {0:,} in hex is: {0:#x},the number {1} in oct is {1:#o}".format(5555,55))
#The number 5,555 in hex is: 0x15b3,the number 55 in oct is 0o67

print("The number {1:,} in hex is: {1:#x},the number {0} in oct is {0:#o}".format(5555,55))
#The number 55 in hex is: 0x37,the number 5555 in oct is 0o12663

print("my name is {name} , my age is {age} , and my QQ is {qq}".format(name="xuqinyang",qq = "30647355",age = 37))
#my name is xuqinyang , my age is 37 , and my QQ is 30647355

position = (5,8,13)
print("X:{0[0]};Y:{0[1]};Z:{0[2]}".format(position))
#X:5;Y:8;Z:13

weather = [("Monday","rain"),("Tuesday","sunny"),("Wednesday","sunny"),("Thursday","rain"),("Friday","Cloudy")]
formatter = "Weather of '{0[0]}' is '{0[1]}'".format
for item in map(formatter,weather):
    print(item)
#Weather of 'Monday' is 'rain'
#Weather of 'Tuesday' is 'sunny'
#Weather of 'Wednesday' is 'sunny'
#Weather of 'Thursday' is 'rain'
#Weather of 'Friday' is 'Cloudy'
```

可以在字符串中使用`\`（反斜杠）来表示转义，也就是说`\`后面的字符不再是它原来的意义，例如：`\n`不是代表反斜杠和字符n，而是表示换行；而`\t`也不是代表反斜杠和字符t，而是表示制表符。所以如果想在字符串中表示`'`要写成`\'`，同理想表示`\`要写成`\\`。可以运行下面的代码看看会输出什么。

```Python
s1 = '\'hello, world!\''
s2 = '\n\\hello, world!\\\n'
print(s1, s2, end='')
```

在`\`后面还可以跟一个八进制或者十六进制数来表示字符，例如`\141`和`\x61`都代表小写字母`a`，前者是八进制的表示法，后者是十六进制的表示法。也可以在`\`后面跟Unicode字符编码来表示字符，例如`\u9a86\u660a`代表的是中文“骆昊”。运行下面的代码，看看输出了什么。

```Python
s1 = '\141\142\143\x61\x62\x63'
s2 = '\u9a86\u660a'
print(s1, s2)
```

如果不希望字符串中的`\`表示转义，我们可以通过在字符串的最前面加上字母`r`来加以说明，再看看下面的代码又会输出什么。

```Python
s1 = r'\'hello, world!\''
s2 = r'\n\\hello, world!\\\n'
print(s1, s2, end='')
```

Python为字符串类型提供了非常丰富的运算符，我们可以使用`+`运算符来实现字符串的拼接，可以使用`*`运算符来重复一个字符串的内容，可以使用`in`和`not in`来判断一个字符串是否包含另外一个字符串（成员运算），我们也可以用`[]`和`[:]`运算符从字符串取出某个字符或某些字符（切片运算），代码如下所示。

```Python
s1 = 'hello ' * 3
print(s1) 								# hello hello hello 
s2 = 'world'
s1 += s2
print(s1)								# hello hello hello world
print('ll' in s1) 						# True
print('good' in s1) 					# False
str2 = 'abc123456'
# 从字符串中取出指定位置的字符(下标运算)
print(str2[2]) # c
# 字符串切片(从指定的开始索引到指定的结束索引)
print(str2[2:5]) 						# c12
print(str2[2:]) 						# c123456
print(str2[2::2])					    # c246
print(str2[::2]) 						# ac246
print(str2[::-1]) 						# 654321cba
print(str2[-3:-1]) 						# 45
```

在Python中，我们还可以通过一系列的方法来完成对字符串的处理，代码如下所示。

```Python
str1 = 'hello, world!'
# 通过内置函数len计算字符串的长度
print(len(str1)) # 13
# 获得字符串首字母大写的拷贝
print(str1.capitalize()) # Hello, world!
# 获得字符串每个单词首字母大写的拷贝
print(str1.title()) # Hello, World!
# 获得字符串变大写后的拷贝
print(str1.upper()) # HELLO, WORLD!
# 从字符串中查找子串所在位置
print(str1.find('or')) # 8
print(str1.find('shit')) # -1
# 与find类似但找不到子串时会引发异常
# print(str1.index('or'))
# print(str1.index('shit'))
# 检查字符串是否以指定的字符串开头
print(str1.startswith('He')) # False
print(str1.startswith('hel')) # True
# 检查字符串是否以指定的字符串结尾
print(str1.endswith('!')) # True
# 将字符串以指定的宽度居中并在两侧填充指定的字符
print(str1.center(50, '*'))
# 将字符串以指定的宽度靠右放置左侧填充指定的字符
print(str1.rjust(50, ' '))
str2 = 'abc123456'
# 检查字符串是否由数字构成
print(str2.isdigit())  # False
# 检查字符串是否以字母构成
print(str2.isalpha())  # False
# 检查字符串是否以数字和字母构成
print(str2.isalnum())  # True
str3 = '  jackfrued@126.com '
print(str3)
# 获得字符串修剪左右两侧空格之后的拷贝
print(str3.strip())
```

我们之前讲过，可以用下面的方式来格式化输出字符串。

```Python
a, b = 5, 10
print('%d * %d = %d' % (a, b, a * b))
```

当然，我们也可以用字符串提供的方法来完成字符串的格式，代码如下所示。

```Python
a, b = 5, 10
print('{0} * {1} = {2}'.format(a, b, a * b))
```

Python 3.6以后，格式化字符串还有更为简洁的书写方式，就是在字符串前加上字母`f`，我们可以使用下面的语法糖来简化上面的代码。

```Python
a, b = 5, 10
print(f'{a} * {b} = {a * b}')
```

#### 字符串常用方法

##### 1.```find()、rfind()、index()、rindex()、count()```

```find()```和```rfind()```方法分别来查找一个字符串在另一个字符串指定范围（默认是整个字符串）中首次和最后一次出现的位置，如果不存在则返回-1；```index（）```和```rindex()```方法用来返回一个字符串在另一个字符串指定范围中首次和最后一次出现的位置，如果不存在则抛出异常；```count（）```方法用来返回一个字符串在另一个字符串中出现的次数。

```python
s = "apple,peach,banana,peach,pear"
print(s.find("peach"))					#6
print(s.find("peach",7,20))				#-1      如果不存在返回-1
print(s.rfind('p'))						#25
print(s.index('p'))						#1
print(s.index('pe'))					#6
print(s.index('pear'))					#25
print(s.index('ppp'))					#ValueError:substring not found
'''find 和 index 两者差别在于找不存在的字符序列时一个会报错一个会返回-1'''
print(s.count('p'))						#5
print(s.count('pp'))					#1
print(s.count('ppp'))					#0
```

##### 2.```split()、rsplit（）、partition（）、rpartition（）```

```split()```和```rsplit()```方法分别用来以指定字符为分隔符，从字符串左端和右端开始将其分割成多个字符串，并返回包含分割结果的列表；partition()和rpartition（）用来指定字符串为分割字符将原字符串分割为3部分，即分割前的字符串，分隔符字符串，分隔符后的字符串。如果指定的分隔符不在原字符串中，则返回原字符串和两个空字符串。

```python
s = "apple,peach,banana,pear"
print(s.split(","))                          #['apple', 'peach', 'banana', 'pear']
print(s.partition(','))                    #('apple', ',', 'peach,banana,pear')
print(s.rpartition('banana'))       #('apple,peach,', 'banana', ',pear')
s = "2014-10-31"
print(s.split('-'))                       #['2014', '10', '31']
print(list(map(int,s.split('-'))))  #[2014, 10, 31]
```

对于```split（）```和```rsplit（）```方法，如果不指定分隔符，则字符串中的任何空白符号（包括空格，换行符，制表符等）都将被认为时分隔符，返回包含最终分割结果的列表。

```python
s ='\n\nhello\t\t word\n\n\nMy name is Dong'
print(s.split())             #['hello', 'word', 'My', 'name', 'is', 'Dong']
'''还允许指定最大分割次数'''
print(s.split(None,2))       #['hello', 'word', 'My name is Dong']
print(s.rsplit(None,2))      #['\n\nhello\t\t word\n\n\nMy name', 'is', 'Dong']
print(s.split(None,6))       #['hello', 'word', 'My', 'name', 'is', 'Dong']
```

##### 3.```join()```

```join()```方法用来将列表中多个字符串进行连接，并在相邻两个字符串之间插入指定字符

```python
li = ['apple','peach','banana','pear']
sep = ','
s = sep.join(li)
print(s)												#apple,peach,banana,pear
```

4.```lower()```、```upper()```、```capitalize()```、```title()```、```swapcase()```、

```python
s="What is Your Name?"
s2 = s.lower()
print(s2)               #what is your name?
s2 = s.upper()
print(s2)               #WHAT IS YOUR NAME?
s2 = s.capitalize()
print(s2)               #What is your name?
s2 = s.title()      
print(s2)               #What is your name?
s2 = s.swapcase()
print(s2)               #wHAT IS yOUR nAME?
```

##### 5.```replace()``` 

该方法用来替换字符串或子字符串的所有重复出现，每次只能替换一个字符或者一个子字符串。

```python
s = "中国,中国"
print(s)													#中国,中国
s2 = s.replace("中国","中华人民共和国")
print(s2)													#中华人民共和国,中华人民共和国
```

##### 6```.maketrans()```,```translate()```

```maketrans()```方法用来生成字符映射表，而```translate()```方法则按照映照表关系转换字符串并替换其中的字符，使用者两个方法的组合可以同时处理多个不同的字符，```replace()```方法则无法满足这一要求。下面的代码演示了则两个方法的用法，当然还可以自己的字符映射表，然后用来对字符串进行加密。

用来作为翻译或改变等方法

```python
table = ''. maketrans("abcdef123","uvwxyz@#$")
s = "Python is a greate programming language.I like it!"
print(s.translate(table))
#Python is u gryuty progrumming lunguugy.I liky it!
```

##### 7.```strip()``````rstip()``````lstrip()```

这个方法用来删除两端，右端，或左端的空白字符或来连续的指定字符

```python
s = "   abc "
print(s.strip())        #abc
print('\n\nhello world    \n\n'.strip())    #hello world
print("aaaassddf".strip("a"))               #ssddf
print("aaaassddf".strip("af"))              #ssdd
print("aaaassddfaaa".rstrip("a"))           #aaaassddf
print("aaaassddfaaa".lstrip("a"))           #ssddfaaa
```

##### 8```eval()```

把任意字符串转换为Python表达式并求值

```python
print(eval("3+4"))                            #7
import math
print(eval("help(math.sqrt)"))
# Help on built-in function sqrt in module math:
# sqrt(x, /)
#     Return the square root of x.
# None
print(eval("math.sqrt(3)"))
# 1.7320508075688772
print(eval("aa"))
#NameError: name 'aa' is not defined
```

```eval()```可以计算任意合法的表达式的值，可以自行外部程序

```python
eval("__import__('os').system('md testtest')")
```

##### 9```关键词in```

```python
print("a"in"abcde")             #True
print("ab"in"abcde")            #True
```

##### 10.```startswith()```、```endswith()```

用来判断字符串是否以指定字符串开始或结束

```python
s="beautiful is better than ugly"
print(s.startswith('be'))   #True
'''可以接收两个整数参数来限定字符串的检测范围'''
print(s.startswith('be',0,5)) #True
```

另外，这两个方法还可以接收一个字符串元组作为参数来表示前缀或者后缀。以下代码可以列出指定文件夹下所有拓展名为bmp或jpg或gif的图片。

```python
import os
[filename for filename in os.listdir(r'D:\\') if filename.endwith(('.bmp','.jpg','.gif'))]
```

##### 11.```isalnum()```,  ```isalpha()``` , ```isdigit() ``` , ```isspace()``` ,```isupper()``` ,```islower()``` 

```python
'''判断是否为数字或字母'''
print('1234abcd'.isalnum())#True
'''判断是否为字母'''
print('1234abcd'.isalpha())#False
'''判断是否为数字字符'''
print('1234abcd'.isdigit())#False
print('abcd'.isalpha())#True
print('1234.0'.isdigit())#False
print('1234'.isdigit())#True
```

##### 12.```center()```, ```ljust()``` ,```rjust()``` 

返回指定宽度的新字符串，原字符串居中，左对齐或右对齐出现在新的字符串中，如果指定的宽带大于字符串宽度，则使用指定的字符（默认空格）填充

```python
print('Hello world!'.center(20))
print('Hello world!'.center(20,'='))
print('Hello world!'.ljust(20,'='))
#     Hello world!    
# ====Hello world!====
# Hello world!========
```

#### 字符串常量

```python
import random
x = string.digits + string.ascii_letters+string.punctuation
print(''.join([random.choice(x) for i in range(8)]))
#C|`Nu6Er
print(''.join(random.sample(x,8)))
#U\;]g!9M
```

#### ```random```标准库

random是与随机数有关的python标准库，除了用于从序列中任意选择一个元素的函数```choice（）```，random还提供了用于生成指定二进制位数的随机整数函数```getrandbits()```,用于生成指定范围内的随机的函数```randrange()```和```randint()```列表原地乱序的函数```shuffle()```，从序列中随机选择指定数量不重复元素的函数```sample()```,返回[0，1]区间内符合```beta```分布的随机函数```betavariate()```符合gamma分布的随机函数```gammavariate()```,符合gauss分布的随机函数```gauss()```

以下展现发红包算法：

```python
import random
def hongbao (total,num):
    #total表示拟发红包的总金额
    #num表示拟发红包的数量
    each = []
    #已发红包的总金额
    already = 0
    for i in range(1,num):
        #为当前抢红包的人随机分配金额
        #至少为剩下的人每一个人留下一分钱
        t = random.randint(1,(total-already)-(num-i))
        each.append(t)
        already = already + t
    each.append(total-already)
    return each

if __name__ =='__main__':
    total = 50
    num = 5
    #模拟30次
    for i in range(30):
        each = hongbao(total,num)
        print(each)
 
#[20, 26, 1, 1, 2]
#[24, 14, 9, 1, 2]
#[7, 11, 5, 8, 19]
```

### 可变字符串

```python
import io
s = "Hello,world"
sio = io.StringIO(s)
print(sio.getvalue())   #Hello,world
print(sio.seek(7))      #7
print(sio.write("there!")) #6
print(sio.getvalue())   #Hello,wthere!

import array
a = array.array('u',s)
print(a)                #array('u', 'Hello,world')
a[0]='y'
print(a)                #array('u', 'yello,world')
print(a.tounicode())    #yello,world
```



除了字符串，Python还内置了多种类型的数据结构，如果要在程序中保存和操作数据，绝大多数时候可以利用现有的数据结构来实现，最常用的包括列表、元组、集合和字典。

### 正则表达式

正则表达式使用预定义特定模式匹配一内具有共同特征的字符串，主要用于字符串处理可以快速、准确地完成查找、替换等处理要求。re模块提供了正则表达式操作所需要的功能。

#### 正则表达式语法

| 元字符 | 功能说明                                                     |
| ------ | ------------------------------------------------------------ |
| .      | 匹配除换行符以外的任意字符                                   |
| *      | 匹配位于*之前的字符或子模式的0次或多次出现                   |
| +      | 匹配位于+之前的字符或子模式的1次或多次出现                   |
| -      | 用在[ ]之内用来表示范围                                      |
| \|     | 匹配位于\|之前或之后的字符                                   |
| ^      | 匹配行首，匹配以^后面的字符开头的字符串                      |
| $      | 匹配行尾，匹配以$之前的字符结束的字符串                      |
| ？     | 匹配位于“？”之前的0个或1个字符，当此字符紧随任何其他限定符（*，+，？，{n}，{n,},{n,m}），匹配模式是”非贪心的“。”非贪心的“模式匹配搜索到的，尽可能短的字符串。 |
| \      | 表示位于\之后的为转义字符                                    |
| \num   | 此处的num是一个正整数。例如”（.)\1“                          |
| \f     | 换页符匹配                                                   |
| \n     | 换行符匹配                                                   |
| \r     | 匹配一个回车符                                               |
| \b     | 匹配单词头或单词尾                                           |
| \B     | 与\b含义相反                                                 |
| \d     | 匹配任何数字，相当于[0-9]                                    |
| \D     | 与\d含义相反，等效于[ ^0-9 ]                                 |
| \s     | 匹配任意空白字符，包括空格、制表符、换页符，与[\f\n\r\t\v]等效 |
| \S     | 与\s含义相反                                                 |
| \w     | 匹配任何字母，数字以及下划线，相当于[a-zA-Z0-9]              |
| \W     | 与\w含义相反，与[ ^A-Za-z0-9]                                |
| ()     | 将位于（）内的内容作为一个整体来对待                         |
| {}     | 按{}中的次数进行匹配                                         |
| []     | 匹配位于[ ]中的任意一个字符                                  |
| [^xyz] | 方向字符集，匹配除了x,y,z之外的任何字符                      |
| [a-z]  | 字符范围，匹配指定范围内的任何字符                           |
| [^a-z] | 反向范围字符，匹配除小写英文字母之外的任何字符               |

如果以”\"开头的元字符与转义字符相同，则需要使用“\\\”或者原始字符串，在字符串前面加上“r”或者“R”。原始字符串可以减少用户的输入，主要用于正则表达式和文件路径字符串，如果字符串以一个斜线“\”结束，则需要多写一个斜线，以“\\\”结束。

具体应用时，可以单独使用某种类型的元字符，但处理复杂字符串时经常要使用多个元字符进行组合

- 最简单的正则表达式是普通字符串

- ‘[pjc]ython’可以匹配‘python’、‘jython’，‘cython’

- '[a-zA-Z0-9]'可以匹配一个任意大小写的字母和数字

- '[ ^ abc]'可以匹配任意除了’a','b','c'之外的字符

- 

  ### 练习																																																																																																																																																																																																																																											

#### 练习1：在屏幕上显示跑马灯文字。

参考答案：																																																																

```Python
import os
import time


def main():
    content = '北京欢迎你为你开天辟地…………'
    while True:
        # 清理屏幕上的输出
        os.system('cls')  # os.system('clear')
        print(content)
        # 休眠200毫秒
        time.sleep(0.2)
        content = content[1:] + content[0]


if __name__ == '__main__':
    main()
```

#### 练习2：设计一个函数产生指定长度的验证码，验证码由大小写字母和数字构成。

参考答案：

```Python
import random


def generate_code(code_len=4):
    """
    生成指定长度的验证码

    :param code_len: 验证码的长度(默认4个字符)

    :return: 由大小写英文字母和数字构成的随机验证码
    """
    all_chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
    last_pos = len(all_chars) - 1
    code = ''
    for _ in range(code_len):
        index = random.randint(0, last_pos)
        code += all_chars[index]
    return code
```

#### 练习3：设计一个函数返回给定文件名的后缀名。

参考答案：

```Python
def get_suffix(filename, has_dot=False):
    """
    获取文件名的后缀名

    :param filename: 文件名
    :param has_dot: 返回的后缀名是否需要带点
    :return: 文件的后缀名
    """
    pos = filename.rfind('.')
    if 0 < pos < len(filename) - 1:
        index = pos if has_dot else pos + 1
        return filename[index:]
    else:
        return ''
```

#### 练习4：设计一个函数返回传入的列表中最大和第二大的元素的值。

参考答案：

```Python
def max2(x):
    m1, m2 = (x[0], x[1]) if x[0] > x[1] else (x[1], x[0])
    for index in range(2, len(x)):
        if x[index] > m1:
            m2 = m1
            m1 = x[index]
        elif x[index] > m2:
            m2 = x[index]
    return m1, m2
```

#### 练习5：计算指定的年月日是这一年的第几天。

参考答案：

```Python
def is_leap_year(year):
    """
    判断指定的年份是不是闰年

    :param year: 年份
    :return: 闰年返回True平年返回False
    """
    return year % 4 == 0 and year % 100 != 0 or year % 400 == 0


def which_day(year, month, date):
    """
    计算传入的日期是这一年的第几天

    :param year: 年
    :param month: 月
    :param date: 日
    :return: 第几天
    """
    days_of_month = [
        [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
        [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
    ][is_leap_year(year)]
    total = 0
    for index in range(month - 1):
        total += days_of_month[index]
    return total + date


def main():
    print(which_day(1980, 11, 28))
    print(which_day(1981, 12, 31))
    print(which_day(2018, 1, 1))
    print(which_day(2016, 3, 1))


if __name__ == '__main__':
    main()
```

#### 练习6：打印[杨辉三角](https://zh.wikipedia.org/wiki/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92%E5%BD%A2)。

参考答案：

```Python
def main():
    num = int(input('Number of rows: '))
    yh = [[]] * num
    for row in range(len(yh)):
        yh[row] = [None] * (row + 1)
        for col in range(len(yh[row])):
            if col == 0 or col == row:
                yh[row][col] = 1
            else:
                yh[row][col] = yh[row - 1][col] + yh[row - 1][col - 1]
            print(yh[row][col], end='\t')
        print()


if __name__ == '__main__':
    main()
```

### 综合案例

#### 案例1：双色球选号。

```Python
from random import randrange, randint, sample


def display(balls):
    """
    输出列表中的双色球号码
    """
    for index, ball in enumerate(balls):
        if index == len(balls) - 1:
            print('|', end=' ')
        print('%02d' % ball, end=' ')
    print()


def random_select():
    """
    随机选择一组号码
    """
    red_balls = [x for x in range(1, 34)]
    selected_balls = []
    selected_balls = sample(red_balls, 6)
    selected_balls.sort()
    selected_balls.append(randint(1, 16))
    return selected_balls


def main():
    n = int(input('机选几注: '))
    for _ in range(n):
        display(random_select())


if __name__ == '__main__':
    main()
```

> **说明：** 上面使用random模块的sample函数来实现从列表中选择不重复的n个元素。

#### 综合案例2：[约瑟夫环问题](https://zh.wikipedia.org/wiki/%E7%BA%A6%E7%91%9F%E5%A4%AB%E6%96%AF%E9%97%AE%E9%A2%98)。

```Python
"""
《幸运的基督徒》
有15个基督徒和15个非基督徒在海上遇险，为了能让一部分人活下来不得不将其中15个人扔到海里面去，有个人想了个办法就是大家围成一个圈，由某个人开始从1报数，报到9的人就扔到海里面，他后面的人接着从1开始报数，报到9的人继续扔到海里面，直到扔掉15个人。由于上帝的保佑，15个基督徒都幸免于难，问这些人最开始是怎么站的，哪些位置是基督徒哪些位置是非基督徒。
"""


def main():
    persons = [True] * 30
    counter, index, number = 0, 0, 0
    while counter < 15:
        if persons[index]:
            number += 1
            if number == 9:
                persons[index] = False
                counter += 1
                number = 0
        index += 1
        index %= 30
    for person in persons:
        print('基' if person else '非', end='')


if __name__ == '__main__':
    main()

```

#### 综合案例3：[井字棋](https://zh.wikipedia.org/wiki/%E4%BA%95%E5%AD%97%E6%A3%8B)游戏。

```Python
import os


def print_board(board):
    print(board['TL'] + '|' + board['TM'] + '|' + board['TR'])
    print('-+-+-')
    print(board['ML'] + '|' + board['MM'] + '|' + board['MR'])
    print('-+-+-')
    print(board['BL'] + '|' + board['BM'] + '|' + board['BR'])


def main():
    init_board = {
        'TL': ' ', 'TM': ' ', 'TR': ' ',
        'ML': ' ', 'MM': ' ', 'MR': ' ',
        'BL': ' ', 'BM': ' ', 'BR': ' '
    }
    begin = True
    while begin:
        curr_board = init_board.copy()
        begin = False
        turn = 'x'
        counter = 0
        os.system('clear')
        print_board(curr_board)
        while counter < 9:
            move = input('轮到%s走棋, 请输入位置: ' % turn)
            if curr_board[move] == ' ':
                counter += 1
                curr_board[move] = turn
                if turn == 'x':
                    turn = 'o'
                else:
                    turn = 'x'
            os.system('clear')
            print_board(curr_board)
        choice = input('再玩一局?(yes|no)')
        begin = choice == 'yes'


if __name__ == '__main__':
    main()
```

>**说明：** 最后这个案例来自[《Python编程快速上手:让繁琐工作自动化》](https://item.jd.com/11943853.html)一书（这本书对有编程基础想迅速使用Python将日常工作自动化的人来说还是不错的选择），对代码做了一点点的调整。            